webpackJsonp([17],{0:function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r=n(5),a=n.n(r),o={};t.a=function(e){var t=a.a.get(o,e);if(void 0===t){var n=document.querySelectorAll('.js-config[type="application/json"]');o=Object.assign.apply(Object,[{}].concat(i(Array.prototype.map.call(n,function(e){return JSON.parse(e.innerHTML)})))),t=a.a.get(o,e)}return void 0===t&&console.warn("Undefined config : "+e),t}},1:function(e,t){e.exports=function(e,t,n,i,r,a){var o,s=e=e||{},c=typeof e.default;"object"!==c&&"function"!==c||(o=e,s=e.default);var u="function"==typeof s?s.options:s;t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),r&&(u._scopeId=r);var l;if(a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=l):i&&(l=i),l){var d=u.functional,f=d?u.render:u.beforeCreate;d?(u._injectStyles=l,u.render=function(e,t){return l.call(t),f(e,t)}):u.beforeCreate=f?[].concat(f,l):[l]}return{esModule:o,exports:s,options:u}}},102:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(8),r=n.n(i),a=function(){$(".d-and-d-upload").each(function(){var e=this;new r.a({el:e,data:{fieldId:"",qnum:null,sizeLimit:null,typeLimit:[],answer:!1,state:"empty",error_message:"",uploadingFile:!1,uploadedFile:!1},mounted:function(){this.fieldId=$(e).attr("id"),this.qnum=$(e).attr("data-qnum"),this.sizeLimit=parseInt($(e).attr("data-size-limit"));var t=$(e).attr("data-type-limit");if(t.length>0&&(this.typeLimit=t.split(",")),$(e).find(".answerData").size()){var n=$(e).find(".answerData").attr("data-file"),i=$(e).find(".answerData").attr("data-date"),r=$(e).find(".answerData").attr("data-time");this.answer={report_file_name:n,answer_date:i,answer_time:r}}},methods:{resetFileForm:function(){this.uploadingFile=!1,this.error_message="",this.changeState("empty")},isUploadable:function(){return"uploading"!==this.state},sendFile:function(e){if(this.isUploadable()&&this.$refs.fileInput.files[0]){var t=this.$refs.fileInput.files[0];this.tryFileUploading(t)||(e.target.value="")}},onFileChange:function(e){if(this.isUploadable()&&e.target.files[0]){var t=e.target.files[0];this.tryFileUploading(t)||(e.target.value="")}},onFileDragEnter:function(e){$(this.$refs.dragArea).addClass("dragenter")},onFileDragLeave:function(e){$(this.$refs.dragArea).removeClass("dragenter")},onFileDragOver:function(e){$(this.$refs.dragArea).addClass("dragenter"),e.dataTransfer.dropEffect="copy"},onFileDrop:function(e){if(this.isUploadable()){var t=e.dataTransfer.files,n=t[0];this.tryFileUploading(n)}},tryFileUploading:function(e){var t=this;return!(this.answer&&!window.confirm(this._t("DO_NOT_UPDATE_REPORT")))&&(this.uploadingFile=e,this.changeState("uploading"),QuestionClient.asyncUploadFile(this.qnum,this.uploadingFile,{done:function(e){t.uploadedFile=e.file,t.answer={report_file_name:e.file.name,answer_date:e.answer_date,answer_time:e.answer_time},t.changeState("empty"),t.error_message=""},fail:function(e){t.resetFileForm(),t.changeState("error"),t.showError(t._t("FILE_UPLOADING_FAILED")+t._t("PLEASE_TRY_AGAIN")+":"+e)}}),!0)},showError:function(e){this.error_message=e},changeState:function(e){this.state=e},_t:function(e){return QuestionClient.t(e)}},filters:{fileSize:function(e){return formatFileSize(e)}}})})}},29:function(e,t,n){"use strict";var i=n(0);t.a={data:function(){return{sessionUpdateInterval:60,clientStartDate:null,timerRemainSecAtStart:-1,timerHandler:null,deadlineDate:null,deadlineRemainSecAtStart:-1,alarmHandler:null,sessionWatch:null,sessionActive:!0,sessionUpdateRequesting:!1,sessionUpdateFailure:0,networkAvailable:!0}},created:function(){this.clientStartDate=new Date},mounted:function(){Object(i.a)("do_contents.update_interval")&&(this.sessionUpdateInterval=Object(i.a)("do_contents.update_interval")),this.sessionWatch=setInterval(this.updateContentsSession,1e3*this.sessionUpdateInterval),parseInt(Object(i.a)("contents_end_datetime"))>0&&(this.deadlineDate=new Date(1e3*parseInt(Object(i.a)("contents_end_datetime"))));var e=document.getElementById("RemainSecondAtStart");e&&parseInt(e.value)>-1&&(this.timerRemainSecAtStart=parseInt(e.value),this.startTimer(),this.debugLog("timer start : "+this.timerRemainSecAtStart)),parseInt(Object(i.a)("deadlineRemainTime"))>0&&(this.deadlineRemainSecAtStart=parseInt(Object(i.a)("deadlineRemainTime")),this.startAlarm(),this.debugLog("alarm set at : "+this.deadlineDate.toUTCString()+" : now : "+(new Date).toUTCString()))},methods:{startTimer:function(){var e=this;this.timerHandler=setTimeout(function(){Object(i.a)("extratime_mode")||(e.countDownTimer()?(e.stopTimer(),e.onTimeUp()):e.startTimer())},1e3)},stopTimer:function(){this.timerHandler&&clearTimeout(this.timerHandler),this.timerHandler=null,this.debugLog("timer stopped")},countDownTimer:function(){var e=((new Date).getTime()-this.clientStartDate.getTime())/1e3,t=this.timerRemainSecAtStart-e;if(t<0&&(t=0),this.onTimerCountDown(t),0===t)return!0},onTimerCountDown:function(e){this.debugLog("timer count down : "+e),this.$emit("timerCountDown",e)},startAlarm:function(){var e=this;this.alarmHandler=setTimeout(function(){Object(i.a)("extratime_mode")||(e.checkAlarm()?(e.stopAlarm(),e.onTimeUp()):e.startAlarm())},1e3)},stopAlarm:function(){this.alarmHandler&&clearTimeout(this.alarmHandler),this.alarmHandler=null,this.debugLog("deadline alarm stopped")},checkAlarm:function(){if(this.deadlineDate){var e=((new Date).getTime()-this.clientStartDate.getTime())/1e3,t=this.deadlineRemainSecAtStart-e;return t<0&&(t=0),this.onAlarmCheck(this.deadlineDate,t),0===t||void 0}},onAlarmCheck:function(e,t){this.debugLog("deadline check : "+t),this.$emit("alarmCheck",e,t)},onTimeUp:function(){this.debugLog("time up "),this.$emit("timeUp"),this.alarmHandler&&this.stopAlarm(),this.timerHandler&&this.stopTimer()},updateContentsSession:function(){var e=this,t=Object(i.a)("TOP_URL")+"lm.php/api/update";if(this.sessionUpdateRequesting)return void this.debugLog("session update is still requesting.");$.ajax({url:t,type:"POST",data:{contents_id:Object(i.a)("contents_id"),client_time:(new Date).toUTCString()},cache:!1,dataType:"json",timeout:3e4}).done(function(t,n,i){if(e.sessionUpdateFailure>0&&e.onConnectionRecovered(),e.sessionUpdateFailure=0,"OK"===t.status)e.onSessionUpdate(t.data);else switch(t.message){case"ContentsSessionLost":e.onSessionLost(t.data);break;case"invalid client time":e.onInvalidClientTime(t.data);break;default:e.onGeneralError(t.message,t.data)}}).fail(function(t,n,i){++e.sessionUpdateFailure>=1&&e.onConnectionLost()}).always(function(){e.sessionUpdateRequesting=!1})},onSessionUpdate:function(e){this.debugLog("session updated")},isSessionActive:function(){return this.sessionActive},onSessionLost:function(e){this.sessionActive=!1,this.debugLog("session lost"),this.$emit("sessionLost")},onInvalidClientTime:function(e){this.debugLog("invalid Client Time"),this.$emit("invalidClientTime")},onGeneralError:function(e,t){this.debugLog("general error : "+e),this.$emit("generalError",e)},isNetworkAvailable:function(){return this.networkAvailable},onConnectionRecovered:function(){this.networkAvailable=!0,this.debugLog("connection recovered"),this.$emit("connectionRecovered")},onConnectionLost:function(){this.networkAvailable=!1,this.debugLog("connection lost"),this.$emit("connectionLost")},debugLog:function(e){}}}},3:function(e,t){function n(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=i(r);return[n].concat(r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"})).concat([a]).join("\n")}return[n].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},33:function(e,t,n){"use strict";t.a={name:"scoring-rubric-result",props:{scoring_rubric:Object,scoring_rubric_answer:Array}}},4:function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],i=l[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(a(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var o=[],r=0;r<n.parts.length;r++)o.push(a(n.parts[r]));l[n.id]={id:n.id,refs:1,parts:o}}}}function r(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function a(e){var t,n,i=document.querySelector("style["+b+'~="'+e.id+'"]');if(i){if(p)return h;i.parentNode.removeChild(i)}if(v){var a=m++;i=f||(f=r()),t=o.bind(null,i,a,!1),n=o.bind(null,i,a,!0)}else i=r(),t=s.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}function o(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=_(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function s(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),g.ssrId&&e.setAttribute(b,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(7),l={},d=c&&(document.head||document.getElementsByTagName("head")[0]),f=null,m=0,p=!1,h=function(){},g=null,b="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n,r){p=n,g=r||{};var a=u(e,t);return i(a),function(t){for(var n=[],r=0;r<a.length;r++){var o=a[r],s=l[o.id];s.refs--,n.push(s)}t?(a=u(e,t),i(a)):a=[];for(var r=0;r<n.length;r++){var s=n[r];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete l[s.id]}}}};var _=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},45:function(e,t,n){"use strict";var i=n(29),r=n(1),a=r(i.a,null,!1,null,null,null);t.a=a.exports},56:function(e,t,n){"use strict";function i(e){n(57)}var r=n(33),a=n(59),o=n(1),s=i,c=o(r.a,a.a,!1,s,"data-v-187bc1bc",null);t.a=c.exports},57:function(e,t,n){var i=n(58);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(4)("af6c70da",i,!0,{})},58:function(e,t,n){t=e.exports=n(3)(!1),t.push([e.i,".rubric_editor[data-v-187bc1bc]{width:100%;border-collapse:collapse}.rubric_editor th[data-v-187bc1bc]{background:#eee}.rubric_editor td[data-v-187bc1bc],.rubric_editor th[data-v-187bc1bc]{border:1px solid #ddd}.rubric-data[data-v-187bc1bc]{background-color:#fff}.rubric-data.in_selected[data-v-187bc1bc],.rubric-data.is_selected[data-v-187bc1bc]{background-color:rgba(158,255,124,.2)}.rubric-data.is_selected .rubric-text-wrapper[data-v-187bc1bc]{border:1px solid green;margin:3px;padding:3px;border-radius:.2em;background-color:#ffffffcf;color:#000}",""])},59:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("table",{staticClass:"rubric_editor"},[n("thead",[n("tr",[n("th"),e._v(" "),e._l(e.scoring_rubric.matrix_col,function(t,i){return n("th",[e._v("\n        "+e._s(t)+"\n      ")])})],2)]),e._v(" "),n("tbody",e._l(e.scoring_rubric.matrix_row,function(t,i){return n("tr",[n("th",[e._v("\n        "+e._s(t)+"\n      ")]),e._v(" "),e._l(e.scoring_rubric.matrix_col,function(t,r){return n("td",{staticClass:"rubric-data",class:{in_selected:0!==e.scoring_rubric_answer[i]&&r+1>e.scoring_rubric_answer[i],is_selected:r+1===e.scoring_rubric_answer[i],out_selected:0!==e.scoring_rubric_answer[i]&&r+1<e.scoring_rubric_answer[i]}},[n("div",{staticClass:"rubric-text-wrapper"},[e._v("\n\n          "+e._s(e.scoring_rubric.rubric[i][r])+"\n        ")])])})],2)}))])])},r=[],a={render:i,staticRenderFns:r};t.a=a},6:function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r=n(5),a=n.n(r),o=!1,s={};t.a=function(e){if(!o){var t=document.querySelectorAll('.js-message[type="application/json"]');s=Object.assign.apply(Object,[{}].concat(i(Array.prototype.map.call(t,function(e){return JSON.parse(e.innerHTML)})))),o=!0}return e?a.a.get(s,e):s}},7:function(e,t){e.exports=function(e,t){for(var n=[],i={},r=0;r<t.length;r++){var a=t[r],o=a[0],s=a[1],c=a[2],u=a[3],l={id:e+":"+r,css:s,media:c,sourceMap:u};i[o]?i[o].parts.push(l):n.push(i[o]={id:o,parts:[l]})}return n}},971:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),r=n.n(i),a=n(10),o=n(45),s=n(56),c=n(6),u=n(0),l=n(102);r.a.use(a.default);var d=Object(u.a)("language"),f={};f[d]=Object(c.a)();var m=new a.default({locale:d,messages:f}),p=document.getElementById("app");p&&new r.a({el:p,components:{DoContents:o.a},template:'<DoContents @timerCountDown="onTimerCountDown" @alarmCheck="onAlarmCheck" @timeUp="onTimeUp" @sessionLost="onSessionLost"\n                           @connectionLost="onConnectionLost" @conectionRecovered="onConnectionRecovered"\n                           @invalidClientTime="onInvalidClientTime" @generalError="onError"></DoContents>',data:{debug:!1},created:function(){},mounted:function(){},methods:{onTimerCountDown:function(e){var t="";if(e>=30){t+=Math.floor(e/60)+1+this.$t("MINUTE_SHORT")}else t+=Math.floor(e)+this.$t("SECOND_SHORT");if(this.debugLog("count down : "+e),parent.button&&parent.button.document){var n=parent.button.document.getElementById("RemainTimeDispBox");n&&(n.innerHTML=t)}else if(document.getElementById("RemainTimeDispBox")){var i=document.getElementById("RemainTimeDispBox");i&&(i.innerHTML=t)}},onAlarmCheck:function(e,t){this.debugLog("dead line check : "+t)},onTimeUp:function(){timeup()},onSessionLost:function(){this.debugLog("session lost")},onInvalidClientTime:function(){this.debugLog("invalid client time")},onConnectionRecovered:function(){this.debugLog("connection recovered")},onConnectionLost:function(){this.debugLog("connection lost")},onError:function(e){this.debugLog("error : "+e)},debugLog:function(e){}},i18n:m});var h=document.querySelectorAll("scoring-rubric-result");h&&h.length&&Array.from(h).forEach(function(e){new r.a({el:e,components:{ScoringRubricResult:s.a},template:'<ScoringRubricResult :scoring_rubric="scoring_rubric" :scoring_rubric_answer="scoring_rubric_answer"></ScoringRubricResult>',data:function(){return{scoring_rubric:JSON.parse(e.getAttribute("scoring_rubric_json")),scoring_rubric_answer:[]}},i18n:m})}),Object(l.a)()}},[971]);